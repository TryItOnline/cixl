/*
  Produces a histogram from stdin.
  
  https://github.com/basic-gongfu/cixl#getting-started
*/

let: ws new Table;

['foo' 'bar' 'baz'] for {
  let: w;

  $ws get $w %, $ if-else {
    ++, $ws put $w $
  } {
    _ $ws put $w 1
  }
}

$ws vect %, $ sort {
  let: (a b);
  (y $b ., x $b) (y $a ., x $a) cmp
}

for {
  let: w;
  #out print, x $w
  #out print \\s
  #out print, str<Int> y $w
  #out print \\n
}